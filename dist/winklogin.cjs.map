{"version":3,"file":"winklogin.cjs","sources":["../node_modules/strict-uri-encode/index.js","../node_modules/decode-uri-component/index.js","../node_modules/split-on-first/index.js","../node_modules/filter-obj/index.js","../node_modules/query-string/index.js","../node_modules/base64-js/index.js","../node_modules/js-sha256/src/sha256.js","../node_modules/keycloak-js/dist/keycloak.mjs","../src/index.js"],"sourcesContent":["'use strict';\nmodule.exports = str => encodeURIComponent(str).replace(/[!'()*]/g, x => `%${x.charCodeAt(0).toString(16).toUpperCase()}`);\n","'use strict';\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp(token, 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn decodeURIComponent(components.join(''));\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tvar left = components.slice(0, split);\n\tvar right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch (err) {\n\t\tvar tokens = input.match(singleMatcher);\n\n\t\tfor (var i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher);\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tvar replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD'\n\t};\n\n\tvar match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch (err) {\n\t\t\tvar result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tvar entries = Object.keys(replaceMap);\n\n\tfor (var i = 0; i < entries.length; i++) {\n\t\t// Replace all decoded components\n\t\tvar key = entries[i];\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nmodule.exports = function (encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch (err) {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n};\n","'use strict';\n\nmodule.exports = (string, separator) => {\n\tif (!(typeof string === 'string' && typeof separator === 'string')) {\n\t\tthrow new TypeError('Expected the arguments to be of type `string`');\n\t}\n\n\tif (separator === '') {\n\t\treturn [string];\n\t}\n\n\tconst separatorIndex = string.indexOf(separator);\n\n\tif (separatorIndex === -1) {\n\t\treturn [string];\n\t}\n\n\treturn [\n\t\tstring.slice(0, separatorIndex),\n\t\tstring.slice(separatorIndex + separator.length)\n\t];\n};\n","'use strict';\nmodule.exports = function (obj, predicate) {\n\tvar ret = {};\n\tvar keys = Object.keys(obj);\n\tvar isArr = Array.isArray(predicate);\n\n\tfor (var i = 0; i < keys.length; i++) {\n\t\tvar key = keys[i];\n\t\tvar val = obj[key];\n\n\t\tif (isArr ? predicate.indexOf(key) !== -1 : predicate(key, val, obj)) {\n\t\t\tret[key] = val;\n\t\t}\n\t}\n\n\treturn ret;\n};\n","'use strict';\nconst strictUriEncode = require('strict-uri-encode');\nconst decodeComponent = require('decode-uri-component');\nconst splitOnFirst = require('split-on-first');\nconst filterObject = require('filter-obj');\n\nconst isNullOrUndefined = value => value === null || value === undefined;\n\nconst encodeFragmentIdentifier = Symbol('encodeFragmentIdentifier');\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tconst index = result.length;\n\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[', index, ']'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join('')\n\t\t\t\t];\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[]'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '[]=', encode(value, options)].join('')];\n\t\t\t};\n\n\t\tcase 'colon-list-separator':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), ':list='].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), ':list=', encode(value, options)].join('')];\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\tcase 'bracket-separator': {\n\t\t\tconst keyValueSep = options.arrayFormat === 'bracket-separator' ?\n\t\t\t\t'[]=' :\n\t\t\t\t'=';\n\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\t// Translate null to an empty string so that it doesn't serialize as 'null'\n\t\t\t\tvalue = value === null ? '' : value;\n\n\t\t\t\tif (result.length === 0) {\n\t\t\t\t\treturn [[encode(key, options), keyValueSep, encode(value, options)].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [[result, encode(value, options)].join(options.arrayFormatSeparator)];\n\t\t\t};\n\t\t}\n\n\t\tdefault:\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined ||\n\t\t\t\t\t(options.skipNull && value === null) ||\n\t\t\t\t\t(options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, encode(key, options)];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tcase 'colon-list-separator':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(:list)$/.exec(key);\n\t\t\t\tkey = key.replace(/:list$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = typeof value === 'string' && value.includes(options.arrayFormatSeparator);\n\t\t\t\tconst isEncodedArray = (typeof value === 'string' && !isArray && decode(value, options).includes(options.arrayFormatSeparator));\n\t\t\t\tvalue = isEncodedArray ? decode(value, options) : value;\n\t\t\t\tconst newValue = isArray || isEncodedArray ? value.split(options.arrayFormatSeparator).map(item => decode(item, options)) : value === null ? value : decode(value, options);\n\t\t\t\taccumulator[key] = newValue;\n\t\t\t};\n\n\t\tcase 'bracket-separator':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = /(\\[\\])$/.test(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!isArray) {\n\t\t\t\t\taccumulator[key] = value ? decode(value, options) : value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst arrayValue = value === null ?\n\t\t\t\t\t[] :\n\t\t\t\t\tvalue.split(options.arrayFormatSeparator).map(item => decode(item, options));\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = arrayValue;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], arrayValue);\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction validateArrayFormatSeparator(value) {\n\tif (typeof value !== 'string' || value.length !== 1) {\n\t\tthrow new TypeError('arrayFormatSeparator must be single character string');\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction decode(value, options) {\n\tif (options.decode) {\n\t\treturn decodeComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction removeHash(input) {\n\tconst hashStart = input.indexOf('#');\n\tif (hashStart !== -1) {\n\t\tinput = input.slice(0, hashStart);\n\t}\n\n\treturn input;\n}\n\nfunction getHash(url) {\n\tlet hash = '';\n\tconst hashStart = url.indexOf('#');\n\tif (hashStart !== -1) {\n\t\thash = url.slice(hashStart);\n\t}\n\n\treturn hash;\n}\n\nfunction extract(input) {\n\tinput = removeHash(input);\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\n\treturn input.slice(queryStart + 1);\n}\n\nfunction parseValue(value, options) {\n\tif (options.parseNumbers && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {\n\t\tvalue = Number(value);\n\t} else if (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {\n\t\tvalue = value.toLowerCase() === 'true';\n\t}\n\n\treturn value;\n}\n\nfunction parse(query, options) {\n\toptions = Object.assign({\n\t\tdecode: true,\n\t\tsort: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ',',\n\t\tparseNumbers: false,\n\t\tparseBooleans: false\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst ret = Object.create(null);\n\n\tif (typeof query !== 'string') {\n\t\treturn ret;\n\t}\n\n\tquery = query.trim().replace(/^[?#&]/, '');\n\n\tif (!query) {\n\t\treturn ret;\n\t}\n\n\tfor (const param of query.split('&')) {\n\t\tif (param === '') {\n\t\t\tcontinue;\n\t\t}\n\n\t\tlet [key, value] = splitOnFirst(options.decode ? param.replace(/\\+/g, ' ') : param, '=');\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : ['comma', 'separator', 'bracket-separator'].includes(options.arrayFormat) ? value : decode(value, options);\n\t\tformatter(decode(key, options), value, ret);\n\t}\n\n\tfor (const key of Object.keys(ret)) {\n\t\tconst value = ret[key];\n\t\tif (typeof value === 'object' && value !== null) {\n\t\t\tfor (const k of Object.keys(value)) {\n\t\t\t\tvalue[k] = parseValue(value[k], options);\n\t\t\t}\n\t\t} else {\n\t\t\tret[key] = parseValue(value, options);\n\t\t}\n\t}\n\n\tif (options.sort === false) {\n\t\treturn ret;\n\t}\n\n\treturn (options.sort === true ? Object.keys(ret).sort() : Object.keys(ret).sort(options.sort)).reduce((result, key) => {\n\t\tconst value = ret[key];\n\t\tif (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(value);\n\t\t} else {\n\t\t\tresult[key] = value;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = (object, options) => {\n\tif (!object) {\n\t\treturn '';\n\t}\n\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ','\n\t}, options);\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst shouldFilter = key => (\n\t\t(options.skipNull && isNullOrUndefined(object[key])) ||\n\t\t(options.skipEmptyString && object[key] === '')\n\t);\n\n\tconst formatter = encoderForArrayFormat(options);\n\n\tconst objectCopy = {};\n\n\tfor (const key of Object.keys(object)) {\n\t\tif (!shouldFilter(key)) {\n\t\t\tobjectCopy[key] = object[key];\n\t\t}\n\t}\n\n\tconst keys = Object.keys(objectCopy);\n\n\tif (options.sort !== false) {\n\t\tkeys.sort(options.sort);\n\t}\n\n\treturn keys.map(key => {\n\t\tconst value = object[key];\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\tif (value.length === 0 && options.arrayFormat === 'bracket-separator') {\n\t\t\t\treturn encode(key, options) + '[]';\n\t\t\t}\n\n\t\t\treturn value\n\t\t\t\t.reduce(formatter(key), [])\n\t\t\t\t.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&');\n};\n\nexports.parseUrl = (url, options) => {\n\toptions = Object.assign({\n\t\tdecode: true\n\t}, options);\n\n\tconst [url_, hash] = splitOnFirst(url, '#');\n\n\treturn Object.assign(\n\t\t{\n\t\t\turl: url_.split('?')[0] || '',\n\t\t\tquery: parse(extract(url), options)\n\t\t},\n\t\toptions && options.parseFragmentIdentifier && hash ? {fragmentIdentifier: decode(hash, options)} : {}\n\t);\n};\n\nexports.stringifyUrl = (object, options) => {\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true,\n\t\t[encodeFragmentIdentifier]: true\n\t}, options);\n\n\tconst url = removeHash(object.url).split('?')[0] || '';\n\tconst queryFromUrl = exports.extract(object.url);\n\tconst parsedQueryFromUrl = exports.parse(queryFromUrl, {sort: false});\n\n\tconst query = Object.assign(parsedQueryFromUrl, object.query);\n\tlet queryString = exports.stringify(query, options);\n\tif (queryString) {\n\t\tqueryString = `?${queryString}`;\n\t}\n\n\tlet hash = getHash(object.url);\n\tif (object.fragmentIdentifier) {\n\t\thash = `#${options[encodeFragmentIdentifier] ? encode(object.fragmentIdentifier, options) : object.fragmentIdentifier}`;\n\t}\n\n\treturn `${url}${queryString}${hash}`;\n};\n\nexports.pick = (input, filter, options) => {\n\toptions = Object.assign({\n\t\tparseFragmentIdentifier: true,\n\t\t[encodeFragmentIdentifier]: false\n\t}, options);\n\n\tconst {url, query, fragmentIdentifier} = exports.parseUrl(input, options);\n\treturn exports.stringifyUrl({\n\t\turl,\n\t\tquery: filterObject(query, filter),\n\t\tfragmentIdentifier\n\t}, options);\n};\n\nexports.exclude = (input, filter, options) => {\n\tconst exclusionFilter = Array.isArray(filter) ? key => !filter.includes(key) : (key, value) => !filter(key, value);\n\n\treturn exports.pick(input, exclusionFilter, options);\n};\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/**\n * [js-sha256]{@link https://github.com/emn178/js-sha256}\n *\n * @version 0.9.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2017\n * @license MIT\n */\n/*jslint bitwise: true */\n(function () {\n  'use strict';\n\n  var ERROR = 'input is invalid type';\n  var WINDOW = typeof window === 'object';\n  var root = WINDOW ? window : {};\n  if (root.JS_SHA256_NO_WINDOW) {\n    WINDOW = false;\n  }\n  var WEB_WORKER = !WINDOW && typeof self === 'object';\n  var NODE_JS = !root.JS_SHA256_NO_NODE_JS && typeof process === 'object' && process.versions && process.versions.node;\n  if (NODE_JS) {\n    root = global;\n  } else if (WEB_WORKER) {\n    root = self;\n  }\n  var COMMON_JS = !root.JS_SHA256_NO_COMMON_JS && typeof module === 'object' && module.exports;\n  var AMD = typeof define === 'function' && define.amd;\n  var ARRAY_BUFFER = !root.JS_SHA256_NO_ARRAY_BUFFER && typeof ArrayBuffer !== 'undefined';\n  var HEX_CHARS = '0123456789abcdef'.split('');\n  var EXTRA = [-2147483648, 8388608, 32768, 128];\n  var SHIFT = [24, 16, 8, 0];\n  var K = [\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n  ];\n  var OUTPUT_TYPES = ['hex', 'array', 'digest', 'arrayBuffer'];\n\n  var blocks = [];\n\n  if (root.JS_SHA256_NO_NODE_JS || !Array.isArray) {\n    Array.isArray = function (obj) {\n      return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n  }\n\n  if (ARRAY_BUFFER && (root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW || !ArrayBuffer.isView)) {\n    ArrayBuffer.isView = function (obj) {\n      return typeof obj === 'object' && obj.buffer && obj.buffer.constructor === ArrayBuffer;\n    };\n  }\n\n  var createOutputMethod = function (outputType, is224) {\n    return function (message) {\n      return new Sha256(is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createMethod = function (is224) {\n    var method = createOutputMethod('hex', is224);\n    if (NODE_JS) {\n      method = nodeWrap(method, is224);\n    }\n    method.create = function () {\n      return new Sha256(is224);\n    };\n    method.update = function (message) {\n      return method.create().update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  var nodeWrap = function (method, is224) {\n    var crypto = eval(\"require('crypto')\");\n    var Buffer = eval(\"require('buffer').Buffer\");\n    var algorithm = is224 ? 'sha224' : 'sha256';\n    var nodeMethod = function (message) {\n      if (typeof message === 'string') {\n        return crypto.createHash(algorithm).update(message, 'utf8').digest('hex');\n      } else {\n        if (message === null || message === undefined) {\n          throw new Error(ERROR);\n        } else if (message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        }\n      }\n      if (Array.isArray(message) || ArrayBuffer.isView(message) ||\n        message.constructor === Buffer) {\n        return crypto.createHash(algorithm).update(new Buffer(message)).digest('hex');\n      } else {\n        return method(message);\n      }\n    };\n    return nodeMethod;\n  };\n\n  var createHmacOutputMethod = function (outputType, is224) {\n    return function (key, message) {\n      return new HmacSha256(key, is224, true).update(message)[outputType]();\n    };\n  };\n\n  var createHmacMethod = function (is224) {\n    var method = createHmacOutputMethod('hex', is224);\n    method.create = function (key) {\n      return new HmacSha256(key, is224);\n    };\n    method.update = function (key, message) {\n      return method.create(key).update(message);\n    };\n    for (var i = 0; i < OUTPUT_TYPES.length; ++i) {\n      var type = OUTPUT_TYPES[i];\n      method[type] = createHmacOutputMethod(type, is224);\n    }\n    return method;\n  };\n\n  function Sha256(is224, sharedMemory) {\n    if (sharedMemory) {\n      blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      this.blocks = blocks;\n    } else {\n      this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n    }\n\n    if (is224) {\n      this.h0 = 0xc1059ed8;\n      this.h1 = 0x367cd507;\n      this.h2 = 0x3070dd17;\n      this.h3 = 0xf70e5939;\n      this.h4 = 0xffc00b31;\n      this.h5 = 0x68581511;\n      this.h6 = 0x64f98fa7;\n      this.h7 = 0xbefa4fa4;\n    } else { // 256\n      this.h0 = 0x6a09e667;\n      this.h1 = 0xbb67ae85;\n      this.h2 = 0x3c6ef372;\n      this.h3 = 0xa54ff53a;\n      this.h4 = 0x510e527f;\n      this.h5 = 0x9b05688c;\n      this.h6 = 0x1f83d9ab;\n      this.h7 = 0x5be0cd19;\n    }\n\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n    this.is224 = is224;\n  }\n\n  Sha256.prototype.update = function (message) {\n    if (this.finalized) {\n      return;\n    }\n    var notString, type = typeof message;\n    if (type !== 'string') {\n      if (type === 'object') {\n        if (message === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && message.constructor === ArrayBuffer) {\n          message = new Uint8Array(message);\n        } else if (!Array.isArray(message)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(message)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n      notString = true;\n    }\n    var code, index = 0, i, length = message.length, blocks = this.blocks;\n\n    while (index < length) {\n      if (this.hashed) {\n        this.hashed = false;\n        blocks[0] = this.block;\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n          blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n          blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n          blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n      }\n\n      if (notString) {\n        for (i = this.start; index < length && i < 64; ++index) {\n          blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n        }\n      } else {\n        for (i = this.start; index < length && i < 64; ++index) {\n          code = message.charCodeAt(index);\n          if (code < 0x80) {\n            blocks[i >> 2] |= code << SHIFT[i++ & 3];\n          } else if (code < 0x800) {\n            blocks[i >> 2] |= (0xc0 | (code >> 6)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else if (code < 0xd800 || code >= 0xe000) {\n            blocks[i >> 2] |= (0xe0 | (code >> 12)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          } else {\n            code = 0x10000 + (((code & 0x3ff) << 10) | (message.charCodeAt(++index) & 0x3ff));\n            blocks[i >> 2] |= (0xf0 | (code >> 18)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 12) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | ((code >> 6) & 0x3f)) << SHIFT[i++ & 3];\n            blocks[i >> 2] |= (0x80 | (code & 0x3f)) << SHIFT[i++ & 3];\n          }\n        }\n      }\n\n      this.lastByteIndex = i;\n      this.bytes += i - this.start;\n      if (i >= 64) {\n        this.block = blocks[16];\n        this.start = i - 64;\n        this.hash();\n        this.hashed = true;\n      } else {\n        this.start = i;\n      }\n    }\n    if (this.bytes > 4294967295) {\n      this.hBytes += this.bytes / 4294967296 << 0;\n      this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n  };\n\n  Sha256.prototype.finalize = function () {\n    if (this.finalized) {\n      return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n      if (!this.hashed) {\n        this.hash();\n      }\n      blocks[0] = this.block;\n      blocks[16] = blocks[1] = blocks[2] = blocks[3] =\n        blocks[4] = blocks[5] = blocks[6] = blocks[7] =\n        blocks[8] = blocks[9] = blocks[10] = blocks[11] =\n        blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.hBytes << 3 | this.bytes >>> 29;\n    blocks[15] = this.bytes << 3;\n    this.hash();\n  };\n\n  Sha256.prototype.hash = function () {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4, f = this.h5, g = this.h6,\n      h = this.h7, blocks = this.blocks, j, s0, s1, maj, t1, t2, ch, ab, da, cd, bc;\n\n    for (j = 16; j < 64; ++j) {\n      // rightrotate\n      t1 = blocks[j - 15];\n      s0 = ((t1 >>> 7) | (t1 << 25)) ^ ((t1 >>> 18) | (t1 << 14)) ^ (t1 >>> 3);\n      t1 = blocks[j - 2];\n      s1 = ((t1 >>> 17) | (t1 << 15)) ^ ((t1 >>> 19) | (t1 << 13)) ^ (t1 >>> 10);\n      blocks[j] = blocks[j - 16] + s0 + blocks[j - 7] + s1 << 0;\n    }\n\n    bc = b & c;\n    for (j = 0; j < 64; j += 4) {\n      if (this.first) {\n        if (this.is224) {\n          ab = 300032;\n          t1 = blocks[0] - 1413257819;\n          h = t1 - 150054599 << 0;\n          d = t1 + 24177077 << 0;\n        } else {\n          ab = 704751109;\n          t1 = blocks[0] - 210244248;\n          h = t1 - 1521486534 << 0;\n          d = t1 + 143694565 << 0;\n        }\n        this.first = false;\n      } else {\n        s0 = ((a >>> 2) | (a << 30)) ^ ((a >>> 13) | (a << 19)) ^ ((a >>> 22) | (a << 10));\n        s1 = ((e >>> 6) | (e << 26)) ^ ((e >>> 11) | (e << 21)) ^ ((e >>> 25) | (e << 7));\n        ab = a & b;\n        maj = ab ^ (a & c) ^ bc;\n        ch = (e & f) ^ (~e & g);\n        t1 = h + s1 + ch + K[j] + blocks[j];\n        t2 = s0 + maj;\n        h = d + t1 << 0;\n        d = t1 + t2 << 0;\n      }\n      s0 = ((d >>> 2) | (d << 30)) ^ ((d >>> 13) | (d << 19)) ^ ((d >>> 22) | (d << 10));\n      s1 = ((h >>> 6) | (h << 26)) ^ ((h >>> 11) | (h << 21)) ^ ((h >>> 25) | (h << 7));\n      da = d & a;\n      maj = da ^ (d & b) ^ ab;\n      ch = (h & e) ^ (~h & f);\n      t1 = g + s1 + ch + K[j + 1] + blocks[j + 1];\n      t2 = s0 + maj;\n      g = c + t1 << 0;\n      c = t1 + t2 << 0;\n      s0 = ((c >>> 2) | (c << 30)) ^ ((c >>> 13) | (c << 19)) ^ ((c >>> 22) | (c << 10));\n      s1 = ((g >>> 6) | (g << 26)) ^ ((g >>> 11) | (g << 21)) ^ ((g >>> 25) | (g << 7));\n      cd = c & d;\n      maj = cd ^ (c & a) ^ da;\n      ch = (g & h) ^ (~g & e);\n      t1 = f + s1 + ch + K[j + 2] + blocks[j + 2];\n      t2 = s0 + maj;\n      f = b + t1 << 0;\n      b = t1 + t2 << 0;\n      s0 = ((b >>> 2) | (b << 30)) ^ ((b >>> 13) | (b << 19)) ^ ((b >>> 22) | (b << 10));\n      s1 = ((f >>> 6) | (f << 26)) ^ ((f >>> 11) | (f << 21)) ^ ((f >>> 25) | (f << 7));\n      bc = b & c;\n      maj = bc ^ (b & d) ^ cd;\n      ch = (f & g) ^ (~f & h);\n      t1 = e + s1 + ch + K[j + 3] + blocks[j + 3];\n      t2 = s0 + maj;\n      e = a + t1 << 0;\n      a = t1 + t2 << 0;\n    }\n\n    this.h0 = this.h0 + a << 0;\n    this.h1 = this.h1 + b << 0;\n    this.h2 = this.h2 + c << 0;\n    this.h3 = this.h3 + d << 0;\n    this.h4 = this.h4 + e << 0;\n    this.h5 = this.h5 + f << 0;\n    this.h6 = this.h6 + g << 0;\n    this.h7 = this.h7 + h << 0;\n  };\n\n  Sha256.prototype.hex = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var hex = HEX_CHARS[(h0 >> 28) & 0x0F] + HEX_CHARS[(h0 >> 24) & 0x0F] +\n      HEX_CHARS[(h0 >> 20) & 0x0F] + HEX_CHARS[(h0 >> 16) & 0x0F] +\n      HEX_CHARS[(h0 >> 12) & 0x0F] + HEX_CHARS[(h0 >> 8) & 0x0F] +\n      HEX_CHARS[(h0 >> 4) & 0x0F] + HEX_CHARS[h0 & 0x0F] +\n      HEX_CHARS[(h1 >> 28) & 0x0F] + HEX_CHARS[(h1 >> 24) & 0x0F] +\n      HEX_CHARS[(h1 >> 20) & 0x0F] + HEX_CHARS[(h1 >> 16) & 0x0F] +\n      HEX_CHARS[(h1 >> 12) & 0x0F] + HEX_CHARS[(h1 >> 8) & 0x0F] +\n      HEX_CHARS[(h1 >> 4) & 0x0F] + HEX_CHARS[h1 & 0x0F] +\n      HEX_CHARS[(h2 >> 28) & 0x0F] + HEX_CHARS[(h2 >> 24) & 0x0F] +\n      HEX_CHARS[(h2 >> 20) & 0x0F] + HEX_CHARS[(h2 >> 16) & 0x0F] +\n      HEX_CHARS[(h2 >> 12) & 0x0F] + HEX_CHARS[(h2 >> 8) & 0x0F] +\n      HEX_CHARS[(h2 >> 4) & 0x0F] + HEX_CHARS[h2 & 0x0F] +\n      HEX_CHARS[(h3 >> 28) & 0x0F] + HEX_CHARS[(h3 >> 24) & 0x0F] +\n      HEX_CHARS[(h3 >> 20) & 0x0F] + HEX_CHARS[(h3 >> 16) & 0x0F] +\n      HEX_CHARS[(h3 >> 12) & 0x0F] + HEX_CHARS[(h3 >> 8) & 0x0F] +\n      HEX_CHARS[(h3 >> 4) & 0x0F] + HEX_CHARS[h3 & 0x0F] +\n      HEX_CHARS[(h4 >> 28) & 0x0F] + HEX_CHARS[(h4 >> 24) & 0x0F] +\n      HEX_CHARS[(h4 >> 20) & 0x0F] + HEX_CHARS[(h4 >> 16) & 0x0F] +\n      HEX_CHARS[(h4 >> 12) & 0x0F] + HEX_CHARS[(h4 >> 8) & 0x0F] +\n      HEX_CHARS[(h4 >> 4) & 0x0F] + HEX_CHARS[h4 & 0x0F] +\n      HEX_CHARS[(h5 >> 28) & 0x0F] + HEX_CHARS[(h5 >> 24) & 0x0F] +\n      HEX_CHARS[(h5 >> 20) & 0x0F] + HEX_CHARS[(h5 >> 16) & 0x0F] +\n      HEX_CHARS[(h5 >> 12) & 0x0F] + HEX_CHARS[(h5 >> 8) & 0x0F] +\n      HEX_CHARS[(h5 >> 4) & 0x0F] + HEX_CHARS[h5 & 0x0F] +\n      HEX_CHARS[(h6 >> 28) & 0x0F] + HEX_CHARS[(h6 >> 24) & 0x0F] +\n      HEX_CHARS[(h6 >> 20) & 0x0F] + HEX_CHARS[(h6 >> 16) & 0x0F] +\n      HEX_CHARS[(h6 >> 12) & 0x0F] + HEX_CHARS[(h6 >> 8) & 0x0F] +\n      HEX_CHARS[(h6 >> 4) & 0x0F] + HEX_CHARS[h6 & 0x0F];\n    if (!this.is224) {\n      hex += HEX_CHARS[(h7 >> 28) & 0x0F] + HEX_CHARS[(h7 >> 24) & 0x0F] +\n        HEX_CHARS[(h7 >> 20) & 0x0F] + HEX_CHARS[(h7 >> 16) & 0x0F] +\n        HEX_CHARS[(h7 >> 12) & 0x0F] + HEX_CHARS[(h7 >> 8) & 0x0F] +\n        HEX_CHARS[(h7 >> 4) & 0x0F] + HEX_CHARS[h7 & 0x0F];\n    }\n    return hex;\n  };\n\n  Sha256.prototype.toString = Sha256.prototype.hex;\n\n  Sha256.prototype.digest = function () {\n    this.finalize();\n\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4, h5 = this.h5,\n      h6 = this.h6, h7 = this.h7;\n\n    var arr = [\n      (h0 >> 24) & 0xFF, (h0 >> 16) & 0xFF, (h0 >> 8) & 0xFF, h0 & 0xFF,\n      (h1 >> 24) & 0xFF, (h1 >> 16) & 0xFF, (h1 >> 8) & 0xFF, h1 & 0xFF,\n      (h2 >> 24) & 0xFF, (h2 >> 16) & 0xFF, (h2 >> 8) & 0xFF, h2 & 0xFF,\n      (h3 >> 24) & 0xFF, (h3 >> 16) & 0xFF, (h3 >> 8) & 0xFF, h3 & 0xFF,\n      (h4 >> 24) & 0xFF, (h4 >> 16) & 0xFF, (h4 >> 8) & 0xFF, h4 & 0xFF,\n      (h5 >> 24) & 0xFF, (h5 >> 16) & 0xFF, (h5 >> 8) & 0xFF, h5 & 0xFF,\n      (h6 >> 24) & 0xFF, (h6 >> 16) & 0xFF, (h6 >> 8) & 0xFF, h6 & 0xFF\n    ];\n    if (!this.is224) {\n      arr.push((h7 >> 24) & 0xFF, (h7 >> 16) & 0xFF, (h7 >> 8) & 0xFF, h7 & 0xFF);\n    }\n    return arr;\n  };\n\n  Sha256.prototype.array = Sha256.prototype.digest;\n\n  Sha256.prototype.arrayBuffer = function () {\n    this.finalize();\n\n    var buffer = new ArrayBuffer(this.is224 ? 28 : 32);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    dataView.setUint32(20, this.h5);\n    dataView.setUint32(24, this.h6);\n    if (!this.is224) {\n      dataView.setUint32(28, this.h7);\n    }\n    return buffer;\n  };\n\n  function HmacSha256(key, is224, sharedMemory) {\n    var i, type = typeof key;\n    if (type === 'string') {\n      var bytes = [], length = key.length, index = 0, code;\n      for (i = 0; i < length; ++i) {\n        code = key.charCodeAt(i);\n        if (code < 0x80) {\n          bytes[index++] = code;\n        } else if (code < 0x800) {\n          bytes[index++] = (0xc0 | (code >> 6));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else if (code < 0xd800 || code >= 0xe000) {\n          bytes[index++] = (0xe0 | (code >> 12));\n          bytes[index++] = (0x80 | ((code >> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        } else {\n          code = 0x10000 + (((code & 0x3ff) << 10) | (key.charCodeAt(++i) & 0x3ff));\n          bytes[index++] = (0xf0 | (code >> 18));\n          bytes[index++] = (0x80 | ((code >> 12) & 0x3f));\n          bytes[index++] = (0x80 | ((code >> 6) & 0x3f));\n          bytes[index++] = (0x80 | (code & 0x3f));\n        }\n      }\n      key = bytes;\n    } else {\n      if (type === 'object') {\n        if (key === null) {\n          throw new Error(ERROR);\n        } else if (ARRAY_BUFFER && key.constructor === ArrayBuffer) {\n          key = new Uint8Array(key);\n        } else if (!Array.isArray(key)) {\n          if (!ARRAY_BUFFER || !ArrayBuffer.isView(key)) {\n            throw new Error(ERROR);\n          }\n        }\n      } else {\n        throw new Error(ERROR);\n      }\n    }\n\n    if (key.length > 64) {\n      key = (new Sha256(is224, true)).update(key).array();\n    }\n\n    var oKeyPad = [], iKeyPad = [];\n    for (i = 0; i < 64; ++i) {\n      var b = key[i] || 0;\n      oKeyPad[i] = 0x5c ^ b;\n      iKeyPad[i] = 0x36 ^ b;\n    }\n\n    Sha256.call(this, is224, sharedMemory);\n\n    this.update(iKeyPad);\n    this.oKeyPad = oKeyPad;\n    this.inner = true;\n    this.sharedMemory = sharedMemory;\n  }\n  HmacSha256.prototype = new Sha256();\n\n  HmacSha256.prototype.finalize = function () {\n    Sha256.prototype.finalize.call(this);\n    if (this.inner) {\n      this.inner = false;\n      var innerHash = this.array();\n      Sha256.call(this, this.is224, this.sharedMemory);\n      this.update(this.oKeyPad);\n      this.update(innerHash);\n      Sha256.prototype.finalize.call(this);\n    }\n  };\n\n  var exports = createMethod();\n  exports.sha256 = exports;\n  exports.sha224 = createMethod(true);\n  exports.sha256.hmac = createHmacMethod();\n  exports.sha224.hmac = createHmacMethod(true);\n\n  if (COMMON_JS) {\n    module.exports = exports;\n  } else {\n    root.sha256 = exports.sha256;\n    root.sha224 = exports.sha224;\n    if (AMD) {\n      define(function () {\n        return exports;\n      });\n    }\n  }\n})();\n","import base64 from 'base64-js';\nimport sha256 from 'js-sha256';\n\n/*\n * Copyright 2016 Red Hat, Inc. and/or its affiliates\n * and other contributors as indicated by the @author tags.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nif (typeof Promise === 'undefined') {\n    throw Error('Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.');\n}\n\nvar loggedPromiseDeprecation = false;\n\nfunction logPromiseDeprecation() {\n    if (!loggedPromiseDeprecation) {\n        loggedPromiseDeprecation = true;\n        console.warn('[KEYCLOAK] Usage of legacy style promise methods such as `.error()` and `.success()` has been deprecated and support will be removed in future versions. Use standard style promise methods such as `.then() and `.catch()` instead.');\n    }\n}\n\nfunction Keycloak (config) {\n    if (!(this instanceof Keycloak)) {\n        return new Keycloak(config);\n    }\n\n    var kc = this;\n    var adapter;\n    var refreshQueue = [];\n    var callbackStorage;\n\n    var loginIframe = {\n        enable: true,\n        callbackList: [],\n        interval: 5\n    };\n\n    var scripts = document.getElementsByTagName('script');\n    for (var i = 0; i < scripts.length; i++) {\n        if ((scripts[i].src.indexOf('keycloak.js') !== -1 || scripts[i].src.indexOf('keycloak.min.js') !== -1) && scripts[i].src.indexOf('version=') !== -1) {\n            kc.iframeVersion = scripts[i].src.substring(scripts[i].src.indexOf('version=') + 8).split('&')[0];\n        }\n    }\n\n    var useNonce = true;\n    var logInfo = createLogger(console.info);\n    var logWarn = createLogger(console.warn);\n\n    kc.init = function (initOptions) {\n        kc.authenticated = false;\n\n        callbackStorage = createCallbackStorage();\n        var adapters = ['default', 'cordova', 'cordova-native'];\n\n        if (initOptions && adapters.indexOf(initOptions.adapter) > -1) {\n            adapter = loadAdapter(initOptions.adapter);\n        } else if (initOptions && typeof initOptions.adapter === \"object\") {\n            adapter = initOptions.adapter;\n        } else {\n            if (window.Cordova || window.cordova) {\n                adapter = loadAdapter('cordova');\n            } else {\n                adapter = loadAdapter();\n            }\n        }\n\n        if (initOptions) {\n            if (typeof initOptions.useNonce !== 'undefined') {\n                useNonce = initOptions.useNonce;\n            }\n\n            if (typeof initOptions.checkLoginIframe !== 'undefined') {\n                loginIframe.enable = initOptions.checkLoginIframe;\n            }\n\n            if (initOptions.checkLoginIframeInterval) {\n                loginIframe.interval = initOptions.checkLoginIframeInterval;\n            }\n\n            if (initOptions.onLoad === 'login-required') {\n                kc.loginRequired = true;\n            }\n\n            if (initOptions.responseMode) {\n                if (initOptions.responseMode === 'query' || initOptions.responseMode === 'fragment') {\n                    kc.responseMode = initOptions.responseMode;\n                } else {\n                    throw 'Invalid value for responseMode';\n                }\n            }\n\n            if (initOptions.flow) {\n                switch (initOptions.flow) {\n                    case 'standard':\n                        kc.responseType = 'code';\n                        break;\n                    case 'implicit':\n                        kc.responseType = 'id_token token';\n                        break;\n                    case 'hybrid':\n                        kc.responseType = 'code id_token token';\n                        break;\n                    default:\n                        throw 'Invalid value for flow';\n                }\n                kc.flow = initOptions.flow;\n            }\n\n            if (initOptions.timeSkew != null) {\n                kc.timeSkew = initOptions.timeSkew;\n            }\n\n            if(initOptions.redirectUri) {\n                kc.redirectUri = initOptions.redirectUri;\n            }\n\n            if (initOptions.silentCheckSsoRedirectUri) {\n                kc.silentCheckSsoRedirectUri = initOptions.silentCheckSsoRedirectUri;\n            }\n\n            if (typeof initOptions.silentCheckSsoFallback === 'boolean') {\n                kc.silentCheckSsoFallback = initOptions.silentCheckSsoFallback;\n            } else {\n                kc.silentCheckSsoFallback = true;\n            }\n\n            if (initOptions.pkceMethod) {\n                if (initOptions.pkceMethod !== \"S256\") {\n                    throw 'Invalid value for pkceMethod';\n                }\n                kc.pkceMethod = initOptions.pkceMethod;\n            }\n\n            if (typeof initOptions.enableLogging === 'boolean') {\n                kc.enableLogging = initOptions.enableLogging;\n            } else {\n                kc.enableLogging = false;\n            }\n\n            if (typeof initOptions.scope === 'string') {\n                kc.scope = initOptions.scope;\n            }\n\n            if (typeof initOptions.messageReceiveTimeout === 'number' && initOptions.messageReceiveTimeout > 0) {\n                kc.messageReceiveTimeout = initOptions.messageReceiveTimeout;\n            } else {\n                kc.messageReceiveTimeout = 10000;\n            }\n        }\n\n        if (!kc.responseMode) {\n            kc.responseMode = 'fragment';\n        }\n        if (!kc.responseType) {\n            kc.responseType = 'code';\n            kc.flow = 'standard';\n        }\n\n        var promise = createPromise();\n\n        var initPromise = createPromise();\n        initPromise.promise.then(function() {\n            kc.onReady && kc.onReady(kc.authenticated);\n            promise.setSuccess(kc.authenticated);\n        }).catch(function(error) {\n            promise.setError(error);\n        });\n\n        var configPromise = loadConfig();\n\n        function onLoad() {\n            var doLogin = function(prompt) {\n                if (!prompt) {\n                    options.prompt = 'none';\n                }\n\n                kc.login(options).then(function () {\n                    initPromise.setSuccess();\n                }).catch(function (error) {\n                    initPromise.setError(error);\n                });\n            };\n\n            var checkSsoSilently = function() {\n                var ifrm = document.createElement(\"iframe\");\n                var src = kc.createLoginUrl({prompt: 'none', redirectUri: kc.silentCheckSsoRedirectUri});\n                ifrm.setAttribute(\"src\", src);\n                ifrm.setAttribute(\"title\", \"keycloak-silent-check-sso\");\n                ifrm.style.display = \"none\";\n                document.body.appendChild(ifrm);\n\n                var messageCallback = function(event) {\n                    if (event.origin !== window.location.origin || ifrm.contentWindow !== event.source) {\n                        return;\n                    }\n\n                    var oauth = parseCallback(event.data);\n                    processCallback(oauth, initPromise);\n\n                    document.body.removeChild(ifrm);\n                    window.removeEventListener(\"message\", messageCallback);\n                };\n\n                window.addEventListener(\"message\", messageCallback);\n            };\n\n            var options = {};\n            switch (initOptions.onLoad) {\n                case 'check-sso':\n                    if (loginIframe.enable) {\n                        setupCheckLoginIframe().then(function() {\n                            checkLoginIframe().then(function (unchanged) {\n                                if (!unchanged) {\n                                    kc.silentCheckSsoRedirectUri ? checkSsoSilently() : doLogin(false);\n                                } else {\n                                    initPromise.setSuccess();\n                                }\n                            }).catch(function (error) {\n                                initPromise.setError(error);\n                            });\n                        });\n                    } else {\n                        kc.silentCheckSsoRedirectUri ? checkSsoSilently() : doLogin(false);\n                    }\n                    break;\n                case 'login-required':\n                    doLogin(true);\n                    break;\n                default:\n                    throw 'Invalid value for onLoad';\n            }\n        }\n\n        function processInit() {\n            var callback = parseCallback(window.location.href);\n\n            if (callback) {\n                window.history.replaceState(window.history.state, null, callback.newUrl);\n            }\n\n            if (callback && callback.valid) {\n                return setupCheckLoginIframe().then(function() {\n                    processCallback(callback, initPromise);\n                }).catch(function (error) {\n                    initPromise.setError(error);\n                });\n            } else if (initOptions) {\n                if (initOptions.token && initOptions.refreshToken) {\n                    setToken(initOptions.token, initOptions.refreshToken, initOptions.idToken);\n\n                    if (loginIframe.enable) {\n                        setupCheckLoginIframe().then(function() {\n                            checkLoginIframe().then(function (unchanged) {\n                                if (unchanged) {\n                                    kc.onAuthSuccess && kc.onAuthSuccess();\n                                    initPromise.setSuccess();\n                                    scheduleCheckIframe();\n                                } else {\n                                    initPromise.setSuccess();\n                                }\n                            }).catch(function (error) {\n                                initPromise.setError(error);\n                            });\n                        });\n                    } else {\n                        kc.updateToken(-1).then(function() {\n                            kc.onAuthSuccess && kc.onAuthSuccess();\n                            initPromise.setSuccess();\n                        }).catch(function(error) {\n                            kc.onAuthError && kc.onAuthError();\n                            if (initOptions.onLoad) {\n                                onLoad();\n                            } else {\n                                initPromise.setError(error);\n                            }\n                        });\n                    }\n                } else if (initOptions.onLoad) {\n                    onLoad();\n                } else {\n                    initPromise.setSuccess();\n                }\n            } else {\n                initPromise.setSuccess();\n            }\n        }\n\n        function domReady() {\n            var promise = createPromise();\n\n            var checkReadyState = function () {\n                if (document.readyState === 'interactive' || document.readyState === 'complete') {\n                    document.removeEventListener('readystatechange', checkReadyState);\n                    promise.setSuccess();\n                }\n            };\n            document.addEventListener('readystatechange', checkReadyState);\n\n            checkReadyState(); // just in case the event was already fired and we missed it (in case the init is done later than at the load time, i.e. it's done from code)\n\n            return promise.promise;\n        }\n\n        configPromise.then(function () {\n            domReady()\n                .then(check3pCookiesSupported)\n                .then(processInit)\n                .catch(function (error) {\n                    promise.setError(error);\n                });\n        });\n        configPromise.catch(function (error) {\n            promise.setError(error);\n        });\n\n        return promise.promise;\n    };\n\n    kc.login = function (options) {\n        return adapter.login(options);\n    };\n\n    function generateRandomData(len) {\n        // use web crypto APIs if possible\n        var array = null;\n        var crypto = window.crypto || window.msCrypto;\n        if (crypto && crypto.getRandomValues && window.Uint8Array) {\n            array = new Uint8Array(len);\n            crypto.getRandomValues(array);\n            return array;\n        }\n\n        // fallback to Math random\n        array = new Array(len);\n        for (var j = 0; j < array.length; j++) {\n            array[j] = Math.floor(256 * Math.random());\n        }\n        return array;\n    }\n\n    function generateCodeVerifier(len) {\n        return generateRandomString(len, 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789');\n    }\n\n    function generateRandomString(len, alphabet){\n        var randomData = generateRandomData(len);\n        var chars = new Array(len);\n        for (var i = 0; i < len; i++) {\n            chars[i] = alphabet.charCodeAt(randomData[i] % alphabet.length);\n        }\n        return String.fromCharCode.apply(null, chars);\n    }\n\n    function generatePkceChallenge(pkceMethod, codeVerifier) {\n        switch (pkceMethod) {\n            // The use of the \"plain\" method is considered insecure and therefore not supported.\n            case \"S256\":\n                // hash codeVerifier, then encode as url-safe base64 without padding\n                var hashBytes = new Uint8Array(sha256.arrayBuffer(codeVerifier));\n                var encodedHash = base64.fromByteArray(hashBytes)\n                    .replace(/\\+/g, '-')\n                    .replace(/\\//g, '_')\n                    .replace(/\\=/g, '');\n                return encodedHash;\n            default:\n                throw 'Invalid value for pkceMethod';\n        }\n    }\n\n    function buildClaimsParameter(requestedAcr){\n        var claims = {\n            id_token: {\n                acr: requestedAcr\n            }\n        };\n        return JSON.stringify(claims);\n    }\n\n    kc.createLoginUrl = function(options) {\n        var state = createUUID();\n        var nonce = createUUID();\n\n        var redirectUri = adapter.redirectUri(options);\n\n        var callbackState = {\n            state: state,\n            nonce: nonce,\n            redirectUri: encodeURIComponent(redirectUri)\n        };\n\n        if (options && options.prompt) {\n            callbackState.prompt = options.prompt;\n        }\n\n        var baseUrl;\n        if (options && options.action == 'register') {\n            baseUrl = kc.endpoints.register();\n        } else {\n            baseUrl = kc.endpoints.authorize();\n        }\n\n        var scope = options && options.scope || kc.scope;\n        if (!scope) {\n            // if scope is not set, default to \"openid\"\n            scope = \"openid\";\n        } else if (scope.indexOf(\"openid\") === -1) {\n            // if openid scope is missing, prefix the given scopes with it\n            scope = \"openid \" + scope;\n        }\n\n        var url = baseUrl\n            + '?client_id=' + encodeURIComponent(kc.clientId)\n            + '&redirect_uri=' + encodeURIComponent(redirectUri)\n            + '&state=' + encodeURIComponent(state)\n            + '&response_mode=' + encodeURIComponent(kc.responseMode)\n            + '&response_type=' + encodeURIComponent(kc.responseType)\n            + '&scope=' + encodeURIComponent(scope);\n        if (useNonce) {\n            url = url + '&nonce=' + encodeURIComponent(nonce);\n        }\n\n        if (options && options.prompt) {\n            url += '&prompt=' + encodeURIComponent(options.prompt);\n        }\n\n        if (options && options.maxAge) {\n            url += '&max_age=' + encodeURIComponent(options.maxAge);\n        }\n\n        if (options && options.loginHint) {\n            url += '&login_hint=' + encodeURIComponent(options.loginHint);\n        }\n\n        if (options && options.idpHint) {\n            url += '&kc_idp_hint=' + encodeURIComponent(options.idpHint);\n        }\n\n        if (options && options.action && options.action != 'register') {\n            url += '&kc_action=' + encodeURIComponent(options.action);\n        }\n\n        if (options && options.locale) {\n            url += '&ui_locales=' + encodeURIComponent(options.locale);\n        }\n\n        if (options && options.acr) {\n            var claimsParameter = buildClaimsParameter(options.acr);\n            url += '&claims=' + encodeURIComponent(claimsParameter);\n        }\n\n        if (kc.pkceMethod) {\n            var codeVerifier = generateCodeVerifier(96);\n            callbackState.pkceCodeVerifier = codeVerifier;\n            var pkceChallenge = generatePkceChallenge(kc.pkceMethod, codeVerifier);\n            url += '&code_challenge=' + pkceChallenge;\n            url += '&code_challenge_method=' + kc.pkceMethod;\n        }\n\n        callbackStorage.add(callbackState);\n\n        return url;\n    };\n\n    kc.logout = function(options) {\n        return adapter.logout(options);\n    };\n\n    kc.createLogoutUrl = function(options) {\n        var url = kc.endpoints.logout()\n            + '?post_logout_redirect_uri=' + encodeURIComponent(adapter.redirectUri(options, false))\n            + '&id_token_hint=' + encodeURIComponent(kc.idToken);\n\n        return url;\n    };\n\n    kc.register = function (options) {\n        return adapter.register(options);\n    };\n\n    kc.createRegisterUrl = function(options) {\n        if (!options) {\n            options = {};\n        }\n        options.action = 'register';\n        return kc.createLoginUrl(options);\n    };\n\n    kc.createAccountUrl = function(options) {\n        var realm = getRealmUrl();\n        var url = undefined;\n        if (typeof realm !== 'undefined') {\n            url = realm\n            + '/account'\n            + '?referrer=' + encodeURIComponent(kc.clientId)\n            + '&referrer_uri=' + encodeURIComponent(adapter.redirectUri(options));\n        }\n        return url;\n    };\n\n    kc.accountManagement = function() {\n        return adapter.accountManagement();\n    };\n\n    kc.hasRealmRole = function (role) {\n        var access = kc.realmAccess;\n        return !!access && access.roles.indexOf(role) >= 0;\n    };\n\n    kc.hasResourceRole = function(role, resource) {\n        if (!kc.resourceAccess) {\n            return false;\n        }\n\n        var access = kc.resourceAccess[resource || kc.clientId];\n        return !!access && access.roles.indexOf(role) >= 0;\n    };\n\n    kc.loadUserProfile = function() {\n        var url = getRealmUrl() + '/account';\n        var req = new XMLHttpRequest();\n        req.open('GET', url, true);\n        req.setRequestHeader('Accept', 'application/json');\n        req.setRequestHeader('Authorization', 'bearer ' + kc.token);\n\n        var promise = createPromise();\n\n        req.onreadystatechange = function () {\n            if (req.readyState == 4) {\n                if (req.status == 200) {\n                    kc.profile = JSON.parse(req.responseText);\n                    promise.setSuccess(kc.profile);\n                } else {\n                    promise.setError();\n                }\n            }\n        };\n\n        req.send();\n\n        return promise.promise;\n    };\n\n    kc.loadUserInfo = function() {\n        var url = kc.endpoints.userinfo();\n        var req = new XMLHttpRequest();\n        req.open('GET', url, true);\n        req.setRequestHeader('Accept', 'application/json');\n        req.setRequestHeader('Authorization', 'bearer ' + kc.token);\n\n        var promise = createPromise();\n\n        req.onreadystatechange = function () {\n            if (req.readyState == 4) {\n                if (req.status == 200) {\n                    kc.userInfo = JSON.parse(req.responseText);\n                    promise.setSuccess(kc.userInfo);\n                } else {\n                    promise.setError();\n                }\n            }\n        };\n\n        req.send();\n\n        return promise.promise;\n    };\n\n    kc.isTokenExpired = function(minValidity) {\n        if (!kc.tokenParsed || (!kc.refreshToken && kc.flow != 'implicit' )) {\n            throw 'Not authenticated';\n        }\n\n        if (kc.timeSkew == null) {\n            logInfo('[KEYCLOAK] Unable to determine if token is expired as timeskew is not set');\n            return true;\n        }\n\n        var expiresIn = kc.tokenParsed['exp'] - Math.ceil(new Date().getTime() / 1000) + kc.timeSkew;\n        if (minValidity) {\n            if (isNaN(minValidity)) {\n                throw 'Invalid minValidity';\n            }\n            expiresIn -= minValidity;\n        }\n        return expiresIn < 0;\n    };\n\n    kc.updateToken = function(minValidity) {\n        var promise = createPromise();\n\n        if (!kc.refreshToken) {\n            promise.setError();\n            return promise.promise;\n        }\n\n        minValidity = minValidity || 5;\n\n        var exec = function() {\n            var refreshToken = false;\n            if (minValidity == -1) {\n                refreshToken = true;\n                logInfo('[KEYCLOAK] Refreshing token: forced refresh');\n            } else if (!kc.tokenParsed || kc.isTokenExpired(minValidity)) {\n                refreshToken = true;\n                logInfo('[KEYCLOAK] Refreshing token: token expired');\n            }\n\n            if (!refreshToken) {\n                promise.setSuccess(false);\n            } else {\n                var params = 'grant_type=refresh_token&' + 'refresh_token=' + kc.refreshToken;\n                var url = kc.endpoints.token();\n\n                refreshQueue.push(promise);\n\n                if (refreshQueue.length == 1) {\n                    var req = new XMLHttpRequest();\n                    req.open('POST', url, true);\n                    req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n                    req.withCredentials = true;\n\n                    params += '&client_id=' + encodeURIComponent(kc.clientId);\n\n                    var timeLocal = new Date().getTime();\n\n                    req.onreadystatechange = function () {\n                        if (req.readyState == 4) {\n                            if (req.status == 200) {\n                                logInfo('[KEYCLOAK] Token refreshed');\n\n                                timeLocal = (timeLocal + new Date().getTime()) / 2;\n\n                                var tokenResponse = JSON.parse(req.responseText);\n\n                                setToken(tokenResponse['access_token'], tokenResponse['refresh_token'], tokenResponse['id_token'], timeLocal);\n\n                                kc.onAuthRefreshSuccess && kc.onAuthRefreshSuccess();\n                                for (var p = refreshQueue.pop(); p != null; p = refreshQueue.pop()) {\n                                    p.setSuccess(true);\n                                }\n                            } else {\n                                logWarn('[KEYCLOAK] Failed to refresh token');\n\n                                if (req.status == 400) {\n                                    kc.clearToken();\n                                }\n\n                                kc.onAuthRefreshError && kc.onAuthRefreshError();\n                                for (var p = refreshQueue.pop(); p != null; p = refreshQueue.pop()) {\n                                    p.setError(true);\n                                }\n                            }\n                        }\n                    };\n\n                    req.send(params);\n                }\n            }\n        };\n\n        if (loginIframe.enable) {\n            var iframePromise = checkLoginIframe();\n            iframePromise.then(function() {\n                exec();\n            }).catch(function(error) {\n                promise.setError(error);\n            });\n        } else {\n            exec();\n        }\n\n        return promise.promise;\n    };\n\n    kc.clearToken = function() {\n        if (kc.token) {\n            setToken(null, null, null);\n            kc.onAuthLogout && kc.onAuthLogout();\n            if (kc.loginRequired) {\n                kc.login();\n            }\n        }\n    };\n\n    function getRealmUrl() {\n        if (typeof kc.authServerUrl !== 'undefined') {\n            if (kc.authServerUrl.charAt(kc.authServerUrl.length - 1) == '/') {\n                return kc.authServerUrl + 'realms/' + encodeURIComponent(kc.realm);\n            } else {\n                return kc.authServerUrl + '/realms/' + encodeURIComponent(kc.realm);\n            }\n        } else {\n            return undefined;\n        }\n    }\n\n    function getOrigin() {\n        if (!window.location.origin) {\n            return window.location.protocol + \"//\" + window.location.hostname + (window.location.port ? ':' + window.location.port: '');\n        } else {\n            return window.location.origin;\n        }\n    }\n\n    function processCallback(oauth, promise) {\n        var code = oauth.code;\n        var error = oauth.error;\n        var prompt = oauth.prompt;\n\n        var timeLocal = new Date().getTime();\n\n        if (oauth['kc_action_status']) {\n            kc.onActionUpdate && kc.onActionUpdate(oauth['kc_action_status']);\n        }\n\n        if (error) {\n            if (prompt != 'none') {\n                var errorData = { error: error, error_description: oauth.error_description };\n                kc.onAuthError && kc.onAuthError(errorData);\n                promise && promise.setError(errorData);\n            } else {\n                promise && promise.setSuccess();\n            }\n            return;\n        } else if ((kc.flow != 'standard') && (oauth.access_token || oauth.id_token)) {\n            authSuccess(oauth.access_token, null, oauth.id_token, true);\n        }\n\n        if ((kc.flow != 'implicit') && code) {\n            var params = 'code=' + code + '&grant_type=authorization_code';\n            var url = kc.endpoints.token();\n\n            var req = new XMLHttpRequest();\n            req.open('POST', url, true);\n            req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n\n            params += '&client_id=' + encodeURIComponent(kc.clientId);\n            params += '&redirect_uri=' + oauth.redirectUri;\n\n            if (oauth.pkceCodeVerifier) {\n                params += '&code_verifier=' + oauth.pkceCodeVerifier;\n            }\n\n            req.withCredentials = true;\n\n            req.onreadystatechange = function() {\n                if (req.readyState == 4) {\n                    if (req.status == 200) {\n\n                        var tokenResponse = JSON.parse(req.responseText);\n                        authSuccess(tokenResponse['access_token'], tokenResponse['refresh_token'], tokenResponse['id_token'], kc.flow === 'standard');\n                        scheduleCheckIframe();\n                    } else {\n                        kc.onAuthError && kc.onAuthError();\n                        promise && promise.setError();\n                    }\n                }\n            };\n\n            req.send(params);\n        }\n\n        function authSuccess(accessToken, refreshToken, idToken, fulfillPromise) {\n            timeLocal = (timeLocal + new Date().getTime()) / 2;\n\n            setToken(accessToken, refreshToken, idToken, timeLocal);\n\n            if (useNonce && ((kc.tokenParsed && kc.tokenParsed.nonce != oauth.storedNonce) ||\n                (kc.refreshTokenParsed && kc.refreshTokenParsed.nonce != oauth.storedNonce) ||\n                (kc.idTokenParsed && kc.idTokenParsed.nonce != oauth.storedNonce))) {\n\n                logInfo('[KEYCLOAK] Invalid nonce, clearing token');\n                kc.clearToken();\n                promise && promise.setError();\n            } else {\n                if (fulfillPromise) {\n                    kc.onAuthSuccess && kc.onAuthSuccess();\n                    promise && promise.setSuccess();\n                }\n            }\n        }\n\n    }\n\n    function loadConfig(url) {\n        var promise = createPromise();\n        var configUrl;\n\n        if (!config) {\n            configUrl = 'keycloak.json';\n        } else if (typeof config === 'string') {\n            configUrl = config;\n        }\n\n        function setupOidcEndoints(oidcConfiguration) {\n            if (! oidcConfiguration) {\n                kc.endpoints = {\n                    authorize: function() {\n                        return getRealmUrl() + '/protocol/openid-connect/auth';\n                    },\n                    token: function() {\n                        return getRealmUrl() + '/protocol/openid-connect/token';\n                    },\n                    logout: function() {\n                        return getRealmUrl() + '/protocol/openid-connect/logout';\n                    },\n                    checkSessionIframe: function() {\n                        var src = getRealmUrl() + '/protocol/openid-connect/login-status-iframe.html';\n                        if (kc.iframeVersion) {\n                            src = src + '?version=' + kc.iframeVersion;\n                        }\n                        return src;\n                    },\n                    thirdPartyCookiesIframe: function() {\n                        var src = getRealmUrl() + '/protocol/openid-connect/3p-cookies/step1.html';\n                        if (kc.iframeVersion) {\n                            src = src + '?version=' + kc.iframeVersion;\n                        }\n                        return src;\n                    },\n                    register: function() {\n                        return getRealmUrl() + '/protocol/openid-connect/registrations';\n                    },\n                    userinfo: function() {\n                        return getRealmUrl() + '/protocol/openid-connect/userinfo';\n                    }\n                };\n            } else {\n                kc.endpoints = {\n                    authorize: function() {\n                        return oidcConfiguration.authorization_endpoint;\n                    },\n                    token: function() {\n                        return oidcConfiguration.token_endpoint;\n                    },\n                    logout: function() {\n                        if (!oidcConfiguration.end_session_endpoint) {\n                            throw \"Not supported by the OIDC server\";\n                        }\n                        return oidcConfiguration.end_session_endpoint;\n                    },\n                    checkSessionIframe: function() {\n                        if (!oidcConfiguration.check_session_iframe) {\n                            throw \"Not supported by the OIDC server\";\n                        }\n                        return oidcConfiguration.check_session_iframe;\n                    },\n                    register: function() {\n                        throw 'Redirection to \"Register user\" page not supported in standard OIDC mode';\n                    },\n                    userinfo: function() {\n                        if (!oidcConfiguration.userinfo_endpoint) {\n                            throw \"Not supported by the OIDC server\";\n                        }\n                        return oidcConfiguration.userinfo_endpoint;\n                    }\n                };\n            }\n        }\n\n        if (configUrl) {\n            var req = new XMLHttpRequest();\n            req.open('GET', configUrl, true);\n            req.setRequestHeader('Accept', 'application/json');\n\n            req.onreadystatechange = function () {\n                if (req.readyState == 4) {\n                    if (req.status == 200 || fileLoaded(req)) {\n                        var config = JSON.parse(req.responseText);\n\n                        kc.authServerUrl = config['auth-server-url'];\n                        kc.realm = config['realm'];\n                        kc.clientId = config['resource'];\n                        setupOidcEndoints(null);\n                        promise.setSuccess();\n                    } else {\n                        promise.setError();\n                    }\n                }\n            };\n\n            req.send();\n        } else {\n            if (!config.clientId) {\n                throw 'clientId missing';\n            }\n\n            kc.clientId = config.clientId;\n\n            var oidcProvider = config['oidcProvider'];\n            if (!oidcProvider) {\n                if (!config['url']) {\n                    var scripts = document.getElementsByTagName('script');\n                    for (var i = 0; i < scripts.length; i++) {\n                        if (scripts[i].src.match(/.*keycloak\\.js/)) {\n                            config.url = scripts[i].src.substr(0, scripts[i].src.indexOf('/js/keycloak.js'));\n                            break;\n                        }\n                    }\n                }\n                if (!config.realm) {\n                    throw 'realm missing';\n                }\n\n                kc.authServerUrl = config.url;\n                kc.realm = config.realm;\n                setupOidcEndoints(null);\n                promise.setSuccess();\n            } else {\n                if (typeof oidcProvider === 'string') {\n                    var oidcProviderConfigUrl;\n                    if (oidcProvider.charAt(oidcProvider.length - 1) == '/') {\n                        oidcProviderConfigUrl = oidcProvider + '.well-known/openid-configuration';\n                    } else {\n                        oidcProviderConfigUrl = oidcProvider + '/.well-known/openid-configuration';\n                    }\n                    var req = new XMLHttpRequest();\n                    req.open('GET', oidcProviderConfigUrl, true);\n                    req.setRequestHeader('Accept', 'application/json');\n\n                    req.onreadystatechange = function () {\n                        if (req.readyState == 4) {\n                            if (req.status == 200 || fileLoaded(req)) {\n                                var oidcProviderConfig = JSON.parse(req.responseText);\n                                setupOidcEndoints(oidcProviderConfig);\n                                promise.setSuccess();\n                            } else {\n                                promise.setError();\n                            }\n                        }\n                    };\n\n                    req.send();\n                } else {\n                    setupOidcEndoints(oidcProvider);\n                    promise.setSuccess();\n                }\n            }\n        }\n\n        return promise.promise;\n    }\n\n    function fileLoaded(xhr) {\n        return xhr.status == 0 && xhr.responseText && xhr.responseURL.startsWith('file:');\n    }\n\n    function setToken(token, refreshToken, idToken, timeLocal) {\n        if (kc.tokenTimeoutHandle) {\n            clearTimeout(kc.tokenTimeoutHandle);\n            kc.tokenTimeoutHandle = null;\n        }\n\n        if (refreshToken) {\n            kc.refreshToken = refreshToken;\n            kc.refreshTokenParsed = decodeToken(refreshToken);\n        } else {\n            delete kc.refreshToken;\n            delete kc.refreshTokenParsed;\n        }\n\n        if (idToken) {\n            kc.idToken = idToken;\n            kc.idTokenParsed = decodeToken(idToken);\n        } else {\n            delete kc.idToken;\n            delete kc.idTokenParsed;\n        }\n\n        if (token) {\n            kc.token = token;\n            kc.tokenParsed = decodeToken(token);\n            kc.sessionId = kc.tokenParsed.session_state;\n            kc.authenticated = true;\n            kc.subject = kc.tokenParsed.sub;\n            kc.realmAccess = kc.tokenParsed.realm_access;\n            kc.resourceAccess = kc.tokenParsed.resource_access;\n\n            if (timeLocal) {\n                kc.timeSkew = Math.floor(timeLocal / 1000) - kc.tokenParsed.iat;\n            }\n\n            if (kc.timeSkew != null) {\n                logInfo('[KEYCLOAK] Estimated time difference between browser and server is ' + kc.timeSkew + ' seconds');\n\n                if (kc.onTokenExpired) {\n                    var expiresIn = (kc.tokenParsed['exp'] - (new Date().getTime() / 1000) + kc.timeSkew) * 1000;\n                    logInfo('[KEYCLOAK] Token expires in ' + Math.round(expiresIn / 1000) + ' s');\n                    if (expiresIn <= 0) {\n                        kc.onTokenExpired();\n                    } else {\n                        kc.tokenTimeoutHandle = setTimeout(kc.onTokenExpired, expiresIn);\n                    }\n                }\n            }\n        } else {\n            delete kc.token;\n            delete kc.tokenParsed;\n            delete kc.subject;\n            delete kc.realmAccess;\n            delete kc.resourceAccess;\n\n            kc.authenticated = false;\n        }\n    }\n\n    function decodeToken(str) {\n        str = str.split('.')[1];\n\n        str = str.replace(/-/g, '+');\n        str = str.replace(/_/g, '/');\n        switch (str.length % 4) {\n            case 0:\n                break;\n            case 2:\n                str += '==';\n                break;\n            case 3:\n                str += '=';\n                break;\n            default:\n                throw 'Invalid token';\n        }\n\n        str = decodeURIComponent(escape(atob(str)));\n\n        str = JSON.parse(str);\n        return str;\n    }\n\n    function createUUID() {\n        var hexDigits = '0123456789abcdef';\n        var s = generateRandomString(36, hexDigits).split(\"\");\n        s[14] = '4';\n        s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);\n        s[8] = s[13] = s[18] = s[23] = '-';\n        var uuid = s.join('');\n        return uuid;\n    }\n\n    function parseCallback(url) {\n        var oauth = parseCallbackUrl(url);\n        if (!oauth) {\n            return;\n        }\n\n        var oauthState = callbackStorage.get(oauth.state);\n\n        if (oauthState) {\n            oauth.valid = true;\n            oauth.redirectUri = oauthState.redirectUri;\n            oauth.storedNonce = oauthState.nonce;\n            oauth.prompt = oauthState.prompt;\n            oauth.pkceCodeVerifier = oauthState.pkceCodeVerifier;\n        }\n\n        return oauth;\n    }\n\n    function parseCallbackUrl(url) {\n        var supportedParams;\n        switch (kc.flow) {\n            case 'standard':\n                supportedParams = ['code', 'state', 'session_state', 'kc_action_status'];\n                break;\n            case 'implicit':\n                supportedParams = ['access_token', 'token_type', 'id_token', 'state', 'session_state', 'expires_in', 'kc_action_status'];\n                break;\n            case 'hybrid':\n                supportedParams = ['access_token', 'token_type', 'id_token', 'code', 'state', 'session_state', 'expires_in', 'kc_action_status'];\n                break;\n        }\n\n        supportedParams.push('error');\n        supportedParams.push('error_description');\n        supportedParams.push('error_uri');\n\n        var queryIndex = url.indexOf('?');\n        var fragmentIndex = url.indexOf('#');\n\n        var newUrl;\n        var parsed;\n\n        if (kc.responseMode === 'query' && queryIndex !== -1) {\n            newUrl = url.substring(0, queryIndex);\n            parsed = parseCallbackParams(url.substring(queryIndex + 1, fragmentIndex !== -1 ? fragmentIndex : url.length), supportedParams);\n            if (parsed.paramsString !== '') {\n                newUrl += '?' + parsed.paramsString;\n            }\n            if (fragmentIndex !== -1) {\n                newUrl += url.substring(fragmentIndex);\n            }\n        } else if (kc.responseMode === 'fragment' && fragmentIndex !== -1) {\n            newUrl = url.substring(0, fragmentIndex);\n            parsed = parseCallbackParams(url.substring(fragmentIndex + 1), supportedParams);\n            if (parsed.paramsString !== '') {\n                newUrl += '#' + parsed.paramsString;\n            }\n        }\n\n        if (parsed && parsed.oauthParams) {\n            if (kc.flow === 'standard' || kc.flow === 'hybrid') {\n                if ((parsed.oauthParams.code || parsed.oauthParams.error) && parsed.oauthParams.state) {\n                    parsed.oauthParams.newUrl = newUrl;\n                    return parsed.oauthParams;\n                }\n            } else if (kc.flow === 'implicit') {\n                if ((parsed.oauthParams.access_token || parsed.oauthParams.error) && parsed.oauthParams.state) {\n                    parsed.oauthParams.newUrl = newUrl;\n                    return parsed.oauthParams;\n                }\n            }\n        }\n    }\n\n    function parseCallbackParams(paramsString, supportedParams) {\n        var p = paramsString.split('&');\n        var result = {\n            paramsString: '',\n            oauthParams: {}\n        };\n        for (var i = 0; i < p.length; i++) {\n            var split = p[i].indexOf(\"=\");\n            var key = p[i].slice(0, split);\n            if (supportedParams.indexOf(key) !== -1) {\n                result.oauthParams[key] = p[i].slice(split + 1);\n            } else {\n                if (result.paramsString !== '') {\n                    result.paramsString += '&';\n                }\n                result.paramsString += p[i];\n            }\n        }\n        return result;\n    }\n\n    function createPromise() {\n        // Need to create a native Promise which also preserves the\n        // interface of the custom promise type previously used by the API\n        var p = {\n            setSuccess: function(result) {\n                p.resolve(result);\n            },\n\n            setError: function(result) {\n                p.reject(result);\n            }\n        };\n        p.promise = new Promise(function(resolve, reject) {\n            p.resolve = resolve;\n            p.reject = reject;\n        });\n\n        p.promise.success = function(callback) {\n            logPromiseDeprecation();\n\n            this.then(function handleSuccess(value) {\n                callback(value);\n            });\n\n            return this;\n        };\n\n        p.promise.error = function(callback) {\n            logPromiseDeprecation();\n\n            this.catch(function handleError(error) {\n                callback(error);\n            });\n\n            return this;\n        };\n\n        return p;\n    }\n\n    // Function to extend existing native Promise with timeout\n    function applyTimeoutToPromise(promise, timeout, errorMessage) {\n        var timeoutHandle = null;\n        var timeoutPromise = new Promise(function (resolve, reject) {\n            timeoutHandle = setTimeout(function () {\n                reject({ \"error\": errorMessage || \"Promise is not settled within timeout of \" + timeout + \"ms\" });\n            }, timeout);\n        });\n\n        return Promise.race([promise, timeoutPromise]).finally(function () {\n            clearTimeout(timeoutHandle);\n        });\n    }\n\n    function setupCheckLoginIframe() {\n        var promise = createPromise();\n\n        if (!loginIframe.enable) {\n            promise.setSuccess();\n            return promise.promise;\n        }\n\n        if (loginIframe.iframe) {\n            promise.setSuccess();\n            return promise.promise;\n        }\n\n        var iframe = document.createElement('iframe');\n        loginIframe.iframe = iframe;\n\n        iframe.onload = function() {\n            var authUrl = kc.endpoints.authorize();\n            if (authUrl.charAt(0) === '/') {\n                loginIframe.iframeOrigin = getOrigin();\n            } else {\n                loginIframe.iframeOrigin = authUrl.substring(0, authUrl.indexOf('/', 8));\n            }\n            promise.setSuccess();\n        };\n\n        var src = kc.endpoints.checkSessionIframe();\n        iframe.setAttribute('src', src );\n        iframe.setAttribute('title', 'keycloak-session-iframe' );\n        iframe.style.display = 'none';\n        document.body.appendChild(iframe);\n\n        var messageCallback = function(event) {\n            if ((event.origin !== loginIframe.iframeOrigin) || (loginIframe.iframe.contentWindow !== event.source)) {\n                return;\n            }\n\n            if (!(event.data == 'unchanged' || event.data == 'changed' || event.data == 'error')) {\n                return;\n            }\n\n\n            if (event.data != 'unchanged') {\n                kc.clearToken();\n            }\n\n            var callbacks = loginIframe.callbackList.splice(0, loginIframe.callbackList.length);\n\n            for (var i = callbacks.length - 1; i >= 0; --i) {\n                var promise = callbacks[i];\n                if (event.data == 'error') {\n                    promise.setError();\n                } else {\n                    promise.setSuccess(event.data == 'unchanged');\n                }\n            }\n        };\n\n        window.addEventListener('message', messageCallback, false);\n\n        return promise.promise;\n    }\n\n    function scheduleCheckIframe() {\n        if (loginIframe.enable) {\n            if (kc.token) {\n                setTimeout(function() {\n                    checkLoginIframe().then(function(unchanged) {\n                        if (unchanged) {\n                            scheduleCheckIframe();\n                        }\n                    });\n                }, loginIframe.interval * 1000);\n            }\n        }\n    }\n\n    function checkLoginIframe() {\n        var promise = createPromise();\n\n        if (loginIframe.iframe && loginIframe.iframeOrigin ) {\n            var msg = kc.clientId + ' ' + (kc.sessionId ? kc.sessionId : '');\n            loginIframe.callbackList.push(promise);\n            var origin = loginIframe.iframeOrigin;\n            if (loginIframe.callbackList.length == 1) {\n                loginIframe.iframe.contentWindow.postMessage(msg, origin);\n            }\n        } else {\n            promise.setSuccess();\n        }\n\n        return promise.promise;\n    }\n\n    function check3pCookiesSupported() {\n        var promise = createPromise();\n\n        if (loginIframe.enable || kc.silentCheckSsoRedirectUri) {\n            var iframe = document.createElement('iframe');\n            iframe.setAttribute('src', kc.endpoints.thirdPartyCookiesIframe());\n            iframe.setAttribute('title', 'keycloak-3p-check-iframe' );\n            iframe.style.display = 'none';\n            document.body.appendChild(iframe);\n\n            var messageCallback = function(event) {\n                if (iframe.contentWindow !== event.source) {\n                    return;\n                }\n\n                if (event.data !== \"supported\" && event.data !== \"unsupported\") {\n                    return;\n                } else if (event.data === \"unsupported\") {\n                    loginIframe.enable = false;\n                    if (kc.silentCheckSsoFallback) {\n                        kc.silentCheckSsoRedirectUri = false;\n                    }\n                    logWarn(\"[KEYCLOAK] 3rd party cookies aren't supported by this browser. checkLoginIframe and \" +\n                        \"silent check-sso are not available.\");\n                }\n\n                document.body.removeChild(iframe);\n                window.removeEventListener(\"message\", messageCallback);\n                promise.setSuccess();\n            };\n\n            window.addEventListener('message', messageCallback, false);\n        } else {\n            promise.setSuccess();\n        }\n\n        return applyTimeoutToPromise(promise.promise, kc.messageReceiveTimeout, \"Timeout when waiting for 3rd party check iframe message.\");\n    }\n\n    function loadAdapter(type) {\n        if (!type || type == 'default') {\n            return {\n                login: function(options) {\n                    window.location.replace(kc.createLoginUrl(options));\n                    return createPromise().promise;\n                },\n\n                logout: function(options) {\n                    window.location.replace(kc.createLogoutUrl(options));\n                    return createPromise().promise;\n                },\n\n                register: function(options) {\n                    window.location.replace(kc.createRegisterUrl(options));\n                    return createPromise().promise;\n                },\n\n                accountManagement : function() {\n                    var accountUrl = kc.createAccountUrl();\n                    if (typeof accountUrl !== 'undefined') {\n                        window.location.href = accountUrl;\n                    } else {\n                        throw \"Not supported by the OIDC server\";\n                    }\n                    return createPromise().promise;\n                },\n\n                redirectUri: function(options, encodeHash) {\n\n                    if (options && options.redirectUri) {\n                        return options.redirectUri;\n                    } else if (kc.redirectUri) {\n                        return kc.redirectUri;\n                    } else {\n                        return location.href;\n                    }\n                }\n            };\n        }\n\n        if (type == 'cordova') {\n            loginIframe.enable = false;\n            var cordovaOpenWindowWrapper = function(loginUrl, target, options) {\n                if (window.cordova && window.cordova.InAppBrowser) {\n                    // Use inappbrowser for IOS and Android if available\n                    return window.cordova.InAppBrowser.open(loginUrl, target, options);\n                } else {\n                    return window.open(loginUrl, target, options);\n                }\n            };\n\n            var shallowCloneCordovaOptions = function (userOptions) {\n                if (userOptions && userOptions.cordovaOptions) {\n                    return Object.keys(userOptions.cordovaOptions).reduce(function (options, optionName) {\n                        options[optionName] = userOptions.cordovaOptions[optionName];\n                        return options;\n                    }, {});\n                } else {\n                    return {};\n                }\n            };\n\n            var formatCordovaOptions = function (cordovaOptions) {\n                return Object.keys(cordovaOptions).reduce(function (options, optionName) {\n                    options.push(optionName+\"=\"+cordovaOptions[optionName]);\n                    return options;\n                }, []).join(\",\");\n            };\n\n            var createCordovaOptions = function (userOptions) {\n                var cordovaOptions = shallowCloneCordovaOptions(userOptions);\n                cordovaOptions.location = 'no';\n                if (userOptions && userOptions.prompt == 'none') {\n                    cordovaOptions.hidden = 'yes';\n                }\n                return formatCordovaOptions(cordovaOptions);\n            };\n\n            return {\n                login: function(options) {\n                    var promise = createPromise();\n\n                    var cordovaOptions = createCordovaOptions(options);\n                    var loginUrl = kc.createLoginUrl(options);\n                    var ref = cordovaOpenWindowWrapper(loginUrl, '_blank', cordovaOptions);\n                    var completed = false;\n\n                    var closed = false;\n                    var closeBrowser = function() {\n                        closed = true;\n                        ref.close();\n                    };\n\n                    ref.addEventListener('loadstart', function(event) {\n                        if (event.url.indexOf('http://localhost') == 0) {\n                            var callback = parseCallback(event.url);\n                            processCallback(callback, promise);\n                            closeBrowser();\n                            completed = true;\n                        }\n                    });\n\n                    ref.addEventListener('loaderror', function(event) {\n                        if (!completed) {\n                            if (event.url.indexOf('http://localhost') == 0) {\n                                var callback = parseCallback(event.url);\n                                processCallback(callback, promise);\n                                closeBrowser();\n                                completed = true;\n                            } else {\n                                promise.setError();\n                                closeBrowser();\n                            }\n                        }\n                    });\n\n                    ref.addEventListener('exit', function(event) {\n                        if (!closed) {\n                            promise.setError({\n                                reason: \"closed_by_user\"\n                            });\n                        }\n                    });\n\n                    return promise.promise;\n                },\n\n                logout: function(options) {\n                    var promise = createPromise();\n\n                    var logoutUrl = kc.createLogoutUrl(options);\n                    var ref = cordovaOpenWindowWrapper(logoutUrl, '_blank', 'location=no,hidden=yes,clearcache=yes');\n\n                    var error;\n\n                    ref.addEventListener('loadstart', function(event) {\n                        if (event.url.indexOf('http://localhost') == 0) {\n                            ref.close();\n                        }\n                    });\n\n                    ref.addEventListener('loaderror', function(event) {\n                        if (event.url.indexOf('http://localhost') == 0) {\n                            ref.close();\n                        } else {\n                            error = true;\n                            ref.close();\n                        }\n                    });\n\n                    ref.addEventListener('exit', function(event) {\n                        if (error) {\n                            promise.setError();\n                        } else {\n                            kc.clearToken();\n                            promise.setSuccess();\n                        }\n                    });\n\n                    return promise.promise;\n                },\n\n                register : function(options) {\n                    var promise = createPromise();\n                    var registerUrl = kc.createRegisterUrl();\n                    var cordovaOptions = createCordovaOptions(options);\n                    var ref = cordovaOpenWindowWrapper(registerUrl, '_blank', cordovaOptions);\n                    ref.addEventListener('loadstart', function(event) {\n                        if (event.url.indexOf('http://localhost') == 0) {\n                            ref.close();\n                            var oauth = parseCallback(event.url);\n                            processCallback(oauth, promise);\n                        }\n                    });\n                    return promise.promise;\n                },\n\n                accountManagement : function() {\n                    var accountUrl = kc.createAccountUrl();\n                    if (typeof accountUrl !== 'undefined') {\n                        var ref = cordovaOpenWindowWrapper(accountUrl, '_blank', 'location=no');\n                        ref.addEventListener('loadstart', function(event) {\n                            if (event.url.indexOf('http://localhost') == 0) {\n                                ref.close();\n                            }\n                        });\n                    } else {\n                        throw \"Not supported by the OIDC server\";\n                    }\n                },\n\n                redirectUri: function(options) {\n                    return 'http://localhost';\n                }\n            }\n        }\n\n        if (type == 'cordova-native') {\n            loginIframe.enable = false;\n\n            return {\n                login: function(options) {\n                    var promise = createPromise();\n                    var loginUrl = kc.createLoginUrl(options);\n\n                    universalLinks.subscribe('keycloak', function(event) {\n                        universalLinks.unsubscribe('keycloak');\n                        window.cordova.plugins.browsertab.close();\n                        var oauth = parseCallback(event.url);\n                        processCallback(oauth, promise);\n                    });\n\n                    window.cordova.plugins.browsertab.openUrl(loginUrl);\n                    return promise.promise;\n                },\n\n                logout: function(options) {\n                    var promise = createPromise();\n                    var logoutUrl = kc.createLogoutUrl(options);\n\n                    universalLinks.subscribe('keycloak', function(event) {\n                        universalLinks.unsubscribe('keycloak');\n                        window.cordova.plugins.browsertab.close();\n                        kc.clearToken();\n                        promise.setSuccess();\n                    });\n\n                    window.cordova.plugins.browsertab.openUrl(logoutUrl);\n                    return promise.promise;\n                },\n\n                register : function(options) {\n                    var promise = createPromise();\n                    var registerUrl = kc.createRegisterUrl(options);\n                    universalLinks.subscribe('keycloak' , function(event) {\n                        universalLinks.unsubscribe('keycloak');\n                        window.cordova.plugins.browsertab.close();\n                        var oauth = parseCallback(event.url);\n                        processCallback(oauth, promise);\n                    });\n                    window.cordova.plugins.browsertab.openUrl(registerUrl);\n                    return promise.promise;\n\n                },\n\n                accountManagement : function() {\n                    var accountUrl = kc.createAccountUrl();\n                    if (typeof accountUrl !== 'undefined') {\n                        window.cordova.plugins.browsertab.openUrl(accountUrl);\n                    } else {\n                        throw \"Not supported by the OIDC server\";\n                    }\n                },\n\n                redirectUri: function(options) {\n                    if (options && options.redirectUri) {\n                        return options.redirectUri;\n                    } else if (kc.redirectUri) {\n                        return kc.redirectUri;\n                    } else {\n                        return \"http://localhost\";\n                    }\n                }\n            }\n        }\n\n        throw 'invalid adapter type: ' + type;\n    }\n\n    var LocalStorage = function() {\n        if (!(this instanceof LocalStorage)) {\n            return new LocalStorage();\n        }\n\n        localStorage.setItem('kc-test', 'test');\n        localStorage.removeItem('kc-test');\n\n        var cs = this;\n\n        function clearExpired() {\n            var time = new Date().getTime();\n            for (var i = 0; i < localStorage.length; i++)  {\n                var key = localStorage.key(i);\n                if (key && key.indexOf('kc-callback-') == 0) {\n                    var value = localStorage.getItem(key);\n                    if (value) {\n                        try {\n                            var expires = JSON.parse(value).expires;\n                            if (!expires || expires < time) {\n                                localStorage.removeItem(key);\n                            }\n                        } catch (err) {\n                            localStorage.removeItem(key);\n                        }\n                    }\n                }\n            }\n        }\n\n        cs.get = function(state) {\n            if (!state) {\n                return;\n            }\n\n            var key = 'kc-callback-' + state;\n            var value = localStorage.getItem(key);\n            if (value) {\n                localStorage.removeItem(key);\n                value = JSON.parse(value);\n            }\n\n            clearExpired();\n            return value;\n        };\n\n        cs.add = function(state) {\n            clearExpired();\n\n            var key = 'kc-callback-' + state.state;\n            state.expires = new Date().getTime() + (60 * 60 * 1000);\n            localStorage.setItem(key, JSON.stringify(state));\n        };\n    };\n\n    var CookieStorage = function() {\n        if (!(this instanceof CookieStorage)) {\n            return new CookieStorage();\n        }\n\n        var cs = this;\n\n        cs.get = function(state) {\n            if (!state) {\n                return;\n            }\n\n            var value = getCookie('kc-callback-' + state);\n            setCookie('kc-callback-' + state, '', cookieExpiration(-100));\n            if (value) {\n                return JSON.parse(value);\n            }\n        };\n\n        cs.add = function(state) {\n            setCookie('kc-callback-' + state.state, JSON.stringify(state), cookieExpiration(60));\n        };\n\n        cs.removeItem = function(key) {\n            setCookie(key, '', cookieExpiration(-100));\n        };\n\n        var cookieExpiration = function (minutes) {\n            var exp = new Date();\n            exp.setTime(exp.getTime() + (minutes*60*1000));\n            return exp;\n        };\n\n        var getCookie = function (key) {\n            var name = key + '=';\n            var ca = document.cookie.split(';');\n            for (var i = 0; i < ca.length; i++) {\n                var c = ca[i];\n                while (c.charAt(0) == ' ') {\n                    c = c.substring(1);\n                }\n                if (c.indexOf(name) == 0) {\n                    return c.substring(name.length, c.length);\n                }\n            }\n            return '';\n        };\n\n        var setCookie = function (key, value, expirationDate) {\n            var cookie = key + '=' + value + '; '\n                + 'expires=' + expirationDate.toUTCString() + '; ';\n            document.cookie = cookie;\n        };\n    };\n\n    function createCallbackStorage() {\n        try {\n            return new LocalStorage();\n        } catch (err) {\n        }\n\n        return new CookieStorage();\n    }\n\n    function createLogger(fn) {\n        return function() {\n            if (kc.enableLogging) {\n                fn.apply(console, Array.prototype.slice.call(arguments));\n            }\n        };\n    }\n}\n\nexport { Keycloak as default };\n","import qs from \"query-string\";\r\n// const qs = require(\"query-string\");\r\nimport css from \"./button.css\";\r\nconsole.log(\"wapi:loaded\");\r\nimport WinkLogin from \"keycloak-js\";\r\n\r\nfunction popupWindow(url, title = \"Wink login\", w = 800, h = 450) {\r\n  // $('.popup-fade-in').show();\r\n  const left = screen.width / 2 - w / 2;\r\n  const top = screen.height / 2 - h / 2;\r\n\r\n  return window.open(\r\n    url,\r\n    title,\r\n    \"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=\" +\r\n      w +\r\n      \", height=\" +\r\n      h +\r\n      \", top=\" +\r\n      top +\r\n      \", left=\" +\r\n      left\r\n  );\r\n}\r\n\r\n// const WINK_CLIENT_ID = \"wink_client_id\";\r\n// const getClientIdFromMetaTag = (metaName = WINK_CLIENT_ID) => {\r\n//   return document\r\n//     .querySelector(`meta[name='${metaName}']`)\r\n//     ?.getAttribute(\"content\");\r\n// };\r\n\r\nconst addStyles = (css) => {\r\n  const styleSheet = document.createElement(\"style\");\r\n  styleSheet.innerText = css;\r\n  document.head.appendChild(styleSheet);\r\n};\r\n\r\nwindow.onload = () => {\r\n  addStyles(css);\r\n}\r\n\r\n// window.onload = () => {\r\n//   const winkClientId = getClientIdFromMetaTag();\r\n//   addStyles(css);\r\n//\r\n//   const buttons = document.querySelectorAll(`.wink-oauth-button`);\r\n//   const redirect = \"some-url\";\r\n//   const search = qs.stringify({ [WINK_CLIENT_ID]: winkClientId, redirect });\r\n//\r\n//   const url = `http://127.0.0.1:8888/?${search}`;\r\n//\r\n//   buttons.forEach((button) =>\r\n//     button.addEventListener(\"click\", () => {\r\n//       console.log(\"onclick['.wink-oauth-button']\");\r\n//\r\n//       if (button.dataset?.popup) {\r\n//         popupWindow(url, \"log in\");\r\n//\r\n//         return;\r\n//       }\r\n//\r\n//       window.location.replace(url);\r\n//     })\r\n//   );\r\n//\r\n//   // read button data-onsuccess\r\n//   // const wapi_onsuccess_function_name = button?.dataset?.onsuccess;\r\n//   // window?.[wapi_onsuccess_function_name]?.({ name: \"John Doe\", id: 1 });\r\n// };\r\n\r\nwindow.WinkLogin = WinkLogin;\r\n"],"names":["strictUriEncode","str","encodeURIComponent","replace","x","charCodeAt","toString","toUpperCase","token","singleMatcher","RegExp","multiMatcher","decodeComponents","components","split","decodeURIComponent","join","err","length","left","slice","right","Array","prototype","concat","call","decode","input","tokens","match","i","customDecodeURIComponent","replaceMap","exec","result","entries","Object","keys","key","decodeUriComponent","encodedURI","TypeError","splitOnFirst","string","separator","separatorIndex","indexOf","filterObj","obj","predicate","ret","isArr","isArray","val","encodeFragmentIdentifier","Symbol","validateArrayFormatSeparator","value","encode","options","strict","decodeComponent","keysSorter","sort","a","b","Number","map","removeHash","hashStart","extract","queryStart","parseValue","parseNumbers","isNaN","trim","parseBooleans","toLowerCase","parse","query","assign","arrayFormat","arrayFormatSeparator","formatter","accumulator","undefined","includes","isEncodedArray","newValue","item","test","arrayValue","parserForArrayFormat","create","param","k","reduce","Boolean","exports","stringify","object","shouldFilter","skipNull","skipEmptyString","index","keyValueSep","encoderForArrayFormat","objectCopy","filter","parseUrl","url","url_","hash","parseFragmentIdentifier","fragmentIdentifier","stringifyUrl","queryFromUrl","parsedQueryFromUrl","queryString","getHash","pick","filterObject","exclude","exclusionFilter","byteLength_1","byteLength","toByteArray_1","toByteArray","fromByteArray_1","fromByteArray","lookup","revLookup","Arr","Uint8Array","code","len","getLens","b64","Error","validLen","lens","placeHoldersLen","_byteLength","tmp","arr","curByte","tripletToBase64","num","encodeChunk","uint8","start","end","output","push","extraBytes","parts","maxChunkLength","len2","ERROR","WINDOW","window","root","JS_SHA256_NO_WINDOW","WEB_WORKER","self","NODE_JS","JS_SHA256_NO_NODE_JS","process","versions","node","global","COMMON_JS","JS_SHA256_NO_COMMON_JS","module","ARRAY_BUFFER","JS_SHA256_NO_ARRAY_BUFFER","ArrayBuffer","HEX_CHARS","EXTRA","SHIFT","K","OUTPUT_TYPES","blocks","JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW","isView","buffer","constructor","createOutputMethod","outputType","is224","message","Sha256","update","createMethod","method","nodeWrap","type","crypto","eval","Buffer","algorithm","nodeMethod","createHash","digest","createHmacOutputMethod","HmacSha256","createHmacMethod","sharedMemory","this","h0","h1","h2","h3","h4","h5","h6","h7","block","bytes","hBytes","finalized","hashed","first","array","oKeyPad","iKeyPad","inner","notString","lastByteIndex","finalize","j","t1","ab","da","cd","bc","c","d","e","f","g","h","hex","arrayBuffer","dataView","DataView","setUint32","innerHash","sha256","sha224","hmac","Promise","loggedPromiseDeprecation","logPromiseDeprecation","console","warn","Keycloak","config","adapter","callbackStorage","kc","refreshQueue","loginIframe","enable","callbackList","interval","scripts","document","getElementsByTagName","src","iframeVersion","substring","useNonce","logInfo","createLogger","info","logWarn","generateRandomString","alphabet","randomData","msCrypto","getRandomValues","Math","floor","random","generateRandomData","chars","String","fromCharCode","apply","getRealmUrl","authServerUrl","charAt","realm","processCallback","oauth","promise","error","prompt","timeLocal","Date","getTime","onActionUpdate","errorData","error_description","onAuthError","setError","setSuccess","flow","access_token","id_token","authSuccess","params","endpoints","req","XMLHttpRequest","open","setRequestHeader","clientId","redirectUri","pkceCodeVerifier","withCredentials","onreadystatechange","readyState","status","tokenResponse","JSON","responseText","scheduleCheckIframe","send","accessToken","refreshToken","idToken","fulfillPromise","setToken","tokenParsed","nonce","storedNonce","refreshTokenParsed","idTokenParsed","clearToken","onAuthSuccess","fileLoaded","xhr","responseURL","startsWith","tokenTimeoutHandle","clearTimeout","decodeToken","sessionId","session_state","authenticated","subject","sub","realmAccess","realm_access","resourceAccess","resource_access","timeSkew","iat","onTokenExpired","expiresIn","round","setTimeout","escape","atob","createUUID","hexDigits","s","substr","parseCallback","supportedParams","newUrl","parsed","queryIndex","fragmentIndex","responseMode","parseCallbackParams","paramsString","oauthParams","state","parseCallbackUrl","oauthState","get","valid","p","createPromise","resolve","reject","success","callback","then","catch","setupCheckLoginIframe","iframe","createElement","onload","authUrl","authorize","iframeOrigin","location","origin","protocol","hostname","port","checkSessionIframe","setAttribute","style","display","body","appendChild","addEventListener","event","contentWindow","source","data","callbacks","splice","checkLoginIframe","unchanged","msg","postMessage","check3pCookiesSupported","silentCheckSsoRedirectUri","thirdPartyCookiesIframe","messageCallback","silentCheckSsoFallback","removeChild","removeEventListener","timeout","errorMessage","timeoutHandle","timeoutPromise","race","finally","applyTimeoutToPromise","messageReceiveTimeout","loadAdapter","login","createLoginUrl","logout","createLogoutUrl","register","createRegisterUrl","accountManagement","accountUrl","createAccountUrl","href","encodeHash","cordovaOpenWindowWrapper","loginUrl","target","cordova","InAppBrowser","createCordovaOptions","userOptions","cordovaOptions","optionName","shallowCloneCordovaOptions","hidden","formatCordovaOptions","ref","completed","closed","closeBrowser","close","reason","logoutUrl","registerUrl","universalLinks","subscribe","unsubscribe","plugins","browsertab","openUrl","init","initOptions","LocalStorage","CookieStorage","createCallbackStorage","Cordova","checkLoginIframeInterval","onLoad","loginRequired","responseType","pkceMethod","enableLogging","scope","initPromise","onReady","configPromise","configUrl","setupOidcEndoints","oidcConfiguration","authorization_endpoint","token_endpoint","end_session_endpoint","check_session_iframe","userinfo","userinfo_endpoint","oidcProvider","oidcProviderConfigUrl","loadConfig","doLogin","checkSsoSilently","ifrm","processInit","history","replaceState","updateToken","checkReadyState","domReady","baseUrl","callbackState","action","maxAge","loginHint","idpHint","locale","acr","claimsParameter","codeVerifier","pkceChallenge","hashBytes","base64","generatePkceChallenge","add","hasRealmRole","role","access","roles","hasResourceRole","resource","loadUserProfile","profile","loadUserInfo","userInfo","isTokenExpired","minValidity","ceil","onAuthRefreshSuccess","pop","onAuthRefreshError","onAuthLogout","clearExpired","time","localStorage","getItem","expires","removeItem","setItem","cs","getCookie","setCookie","cookieExpiration","minutes","exp","setTime","name","ca","cookie","expirationDate","toUTCString","fn","arguments","log","css","styleSheet","innerText","head","addStyles","WinkLogin"],"mappings":"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"}